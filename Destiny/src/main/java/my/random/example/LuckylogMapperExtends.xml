<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="my.random.mapper.LuckylogMapper" >
    <resultMap id="ExtendsResultMap" type="my.random.bean.LuckylogExtends" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 29 18:15:32 KST 2016.
    -->
    <id column="seq" property="seq" jdbcType="BIGINT" />
    <result column="gno" property="gno" jdbcType="INTEGER" />
    <result column="nick" property="nick" jdbcType="VARCHAR" />
    <result column="grade" property="grade" jdbcType="INTEGER" />
    <result column="no1" property="no1" jdbcType="INTEGER" />
    <result column="no2" property="no2" jdbcType="INTEGER" />
    <result column="no3" property="no3" jdbcType="INTEGER" />
    <result column="no4" property="no4" jdbcType="INTEGER" />
    <result column="no5" property="no5" jdbcType="INTEGER" />
    <result column="no6" property="no6" jdbcType="INTEGER" />
    <result column="regdate" property="regdate" jdbcType="TIMESTAMP" />
    <result column="message_no" jdbcType="INTEGER" property="messageNo" />
    
    <result column="uname" property="uname" jdbcType="VARCHAR" />
    <result column="udiv" property="udiv" jdbcType="VARCHAR" />
  </resultMap>
  
  <select id="selectLastWinner" parameterType="HashMap" resultMap="ExtendsResultMap">
    select 
	    ll.gno,
	    ll.regdate,
	    ll.grade,
	    ll.message_no,
	    IFNULL(m.uname,ll.nick) as uname,
	    IFNULL(m.udiv,'NO_MEMBER') as udiv
	    
	    
	    from lucky_log ll
	    LEFT join Member m on ll.nick = m.uid
	where gno=#{lastGno, jdbcType=INTEGER}
	and grade > 0
  </select>
</mapper>